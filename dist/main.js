(()=>{"use strict";class e{constructor(e,t,n,o){this._name=t,this._link=e,this._handleCardClick=n,this._cardSelector=o}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".cards__conteiner").cloneNode(!0)}_setEventListeners(){this._element.querySelector(".cards__emotion").addEventListener("click",(()=>{this._clickLike()})),this._element.querySelector(".cards__trashicon").addEventListener("click",(()=>{this._clickDelete()})),this._element.querySelector(".cards__image").addEventListener("click",(()=>{this._handleCardClick(this._link,this._name)}))}_clickLike(){this._element.querySelector(".cards__emotion").classList.toggle("cards__emotion_active")}_clickDelete(){this._element.remove(),this._element=null}generateCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".cards__image");return e.src=this._link,e.alt=this._name,this._element.querySelector(".cards__title").textContent=this._name,this._element}}class t{constructor(e,t){this._selectorsConfiguration=e,this._formElement=t,this._submitButton=this._formElement.querySelector(this._selectorsConfiguration.submitButtonSelector),this._inputSelector=Array.from(this._formElement.querySelectorAll(this._selectorsConfiguration.inputSelector))}_showInputError(e,t){const n=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._selectorsConfiguration.errorClass),n.textContent=t,n.classList.add(this._selectorsConfiguration.inputErrorClass)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._selectorsConfiguration.errorClass),t.textContent="",t.classList.remove(this._selectorsConfiguration.inputErrorClass)}_isValid(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputSelector.some((e=>!e.validity.valid))}_activetingSubmit(){this._submitButton.classList.remove(this._selectorsConfiguration.inactiveButtonClass),this._submitButton.removeAttribute("disabled")}deactivetingSubmit(){this._submitButton.setAttribute("disabled",!0),this._submitButton.classList.add(this._selectorsConfiguration.inactiveButtonClass)}_toggleButtonState(e){this._hasInvalidInput(e)?this.deactivetingSubmit():this._activetingSubmit()}_setEventListeners(){this._toggleButtonState(),this._inputSelector.forEach((e=>{e.addEventListener("input",(()=>{this._isValid(e),this._toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}}const n=document.querySelector(".profile__button"),o=document.querySelector("#popupEdit"),r=document.querySelector("#popupZoom"),s=document.querySelector("#popupAdd"),i=document.querySelector(".popup__close_add"),c=document.querySelector(".popup__close_edit"),u=document.querySelector(".popup__close_zoom"),l=document.querySelector(".popup__form"),a=document.querySelector(".profile__name"),d=document.querySelector(".profile__spec"),_=document.querySelector(".popup__input_name"),p=document.querySelector(".popup__input_job"),m=document.querySelector(".profile__add"),h=document.querySelector(".cards"),v=document.querySelector(".popup__input_image"),y=document.querySelector(".popup__input_title"),S=document.querySelector(".popup__form_type_add"),f=document.querySelector(".popup__image"),g=document.querySelector(".popup__subtitle"),k={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",errorClass:"popup__error_visible",inputErrorClass:"popup__input_error"},E=new t(k,s);function q(t,n){return new e(t,n,b,".cards__list").generateCard()}function C(e){h.prepend(e)}function b(e,t){L(r),f.src=e,f.alt=t,g.textContent=t}function L(e){e.classList.add("popup_type_opened"),document.addEventListener("mousedown",B),document.addEventListener("keydown",w)}function x(e){e.classList.remove("popup_type_opened"),document.removeEventListener("mousedown",B),document.removeEventListener("keydown",w)}function B(e){const t=document.querySelector(".popup_type_opened");e.target===t&&(x(t),l.reset())}function w(e){const t=document.querySelector(".popup_type_opened");"Escape"===e.key&&x(t)}E.enableValidation(),new t(k,o).enableValidation(),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((e=>{C(q(e.link,e.name))})),i.addEventListener("click",(()=>x(s))),c.addEventListener("click",(()=>x(o))),u.addEventListener("click",(()=>x(r))),n.addEventListener("click",(function(){L(o),_.value=a.textContent,p.value=d.textContent})),l.addEventListener("submit",(function(e){e.preventDefault(),a.textContent=_.value,d.textContent=p.value,l.reset(),x(o)})),m.addEventListener("click",(()=>L(s))),S.addEventListener("submit",(function(e){e.preventDefault();const t={link:v.value,name:y.value};C(q(t.link,t.name)),x(s),S.reset(),E.deactivetingSubmit()}))})();